---
title: ggplot2bdc README
author: Brian Connelly
output: md_document
---

```{r global_options, echo=FALSE}
knitr::opts_chunk$set(fig.path='figure/', warning=FALSE, message=FALSE, error=FALSE)
```

# ggplot2bdc

ggplot2bdc is a collection of themes and other things that can be used when
creating plots with [ggplot2](http://ggplot2.org/).

# Installation

`ggplot2bdc` is not on [CRAN](http://cran.r-project.org/), but you can use
[devtools](http://cran.r-project.org/web/packages/devtools/index.html) to
install the latest and greatest version. To do so:

    if(!require('devtools')) install.packages('devtools')
    library(devtools)
    install_github('briandconnelly/ggplot2bdc')


# Examples

To gain access to the following themes, etc. provided, first load the
`gplot2bdc` package. We'll also load `ggplot`.

```{r}
library(ggplot2bdc)
library(ggplot2)
```

## theme_bdc_simplefacets

`theme_bdc_simplefacets` is a clean theme that uses thin black panels on a white
background. Legends are placed above. Facet labels are displayed as black text.
Subtle grid lines can be added to the panels with the `grid.x` and `grid.y`
parameters.

```{r theme_bdc_simplefacets}
ggplot(movies, aes(x=year, y=budget/1000000, color=rating)) +
    geom_point() +
    facet_grid(mpaa ~ .) +
    labs(x='Year', y='Budget ($ Millions)', title='Hollywood Budgets Against Time') +
    theme_bdc_simplefacets(grid.y=TRUE, grid.x=FALSE)
```


## theme_bdc_grey

`theme_bdc_grey` is a clean theme that uses thin grey panels on a white
background. Legends are placed above. Facet labels are displayed as black text
on a grey background.

```{r theme_bdc_grey}
ggplot(movies, aes(x=year, y=budget/1000000, color=rating)) +
    geom_point() +
    facet_grid(mpaa ~ .) +
    labs(x='Year', y='Budget ($ Millions)', title='Hollywood Budgets Against Time') +
    theme_bdc_grey()
```

Subtle grid lines can be added to the panels with the `grid.x` and `grid.y`
parameters:

```{r theme_bdc_grey_grid}
ggplot(movies, aes(x=year, y=budget/1000000, color=rating)) +
    geom_point() +
    facet_grid(mpaa ~ .) +
    labs(x='Year', y='Budget ($ Millions)', title='Hollywood Budgets Against Time') +
    theme_bdc_grey(grid.x=FALSE, grid.y=TRUE)
```

Some people prefer to display categorical data without tick marks along the
axis. These are included by default, but can be removed by setting either the
`ticks.x` or `ticks.y` parameters to `FALSE`.

```{r theme_bdc_grey_ticks}
ggplot(msleep, aes(x=vore, y=sleep_total)) +
    geom_point(shape=1, alpha=0.2) +
    stat_summary(fun.data='mean_cl_boot') +
    theme_bdc_grey(ticks.x=FALSE)
```

## theme_bdc_black

`theme_bdc_black` is a clean theme that uses thin black panels on a white
background. Legends are placed above. Facet labels are displayed as black text
on a grey background. Subtle grid lines can be added to the panels with the
`grid.x` and `grid.y` parameters, and tick markscan be managed with `ticks.x`
and `ticks.y`.

```{r theme_bdc_black}
ggplot(movies, aes(x=year, y=budget/1000000, color=rating)) +
    geom_point() +
    facet_grid(mpaa ~ .) +
    labs(x='Year', y='Budget ($ Millions)', title='Hollywood Budgets Against Time') +
    theme_bdc_black(grid.y=TRUE, grid.x=FALSE)
```


## theme_bdc_paneled

`theme_bdc_paneled` is a clean theme that displays plots without borders on grey
panels. Legends are placed above. Facet labels are displayed as plan black text.
Subtle grid lines can be added to the panels with the `grid.x` and `grid.y`
parameters, and tick markscan be managed with `ticks.x` and `ticks.y`. By
default, grid lines are used along the Y axis. This theme is best suited for
plots with multiple facets.

```{r theme_bdc_paneled}
ggplot(movies, aes(x=year, y=budget/1000000, color=rating)) +
    geom_point() +
    facet_grid(mpaa ~ .) +
    labs(x='Year', y='Budget ($ Millions)', title='Hollywood Budgets Against Time') +
    theme_bdc_paneled()
```

To more clearly distinguish the individual panels, thick lines can be added on
the far right of each panel. For example:

```{r theme_bdc_paneled2}
ggplot(movies, aes(x=year, y=budget/1000000, color=rating)) +
    geom_point() +
    facet_grid(mpaa ~ .) +
    labs(x='Year', y='Budget ($ Millions)', title='Hollywood Budgets Against Time') +
    geom_vline(aes(xintercept=Inf), color='grey40', size=3) +
    theme_bdc_paneled()
```

## theme_bdc_simple

`theme_bdc_simple` is a classic theme that displays plot axes as solid black
lines on a white background. This theme is probably best suited to single-panel
plots.

```{r theme_bdc_simple}
ggplot(movies, aes(x=year, y=length, color=rating, shape=mpaa)) +
    geom_point() +
    labs(x='Year', y='Length (Minutes)', title='Movie Lengths Against Time') +
    scale_y_log10() +
    theme_bdc_simple()
```

## theme_bdc_microtiter

`theme_bdc_microtiter` is a specialized theme for use in creating figures that
represent 96-well microtiter plates.

```{r loadplatemap,echo=FALSE}
library(dplyr)
platemap <- read.csv("~/Dropbox/Research/Documents/Blog/Blog Post-Analyzing Bacterial Growth/data/platemap.csv")
platemap <- mutate(platemap, Row=as.numeric(match(toupper(substr(Well,1,1)), LETTERS)), Column=as.numeric(substr(Well,2,5)))
platemap$Environment <- as.factor(platemap$Environment)
```

```{r theme_bdc_microtiter}
ggplot(data=platemap, aes(x=Column, y=Row)) +
    geom_point(data=expand.grid(seq(1,12), seq(1,8)), aes(x=Var1, y=Var2), color='grey90', fill='white', shape=21, size=6) +
    geom_point(aes(shape=Environment, colour=Strain), size=10) +
    coord_fixed(ratio=(13/12)/(9/8), xlim=c(0.5,12.5), ylim=c(0.5,8.5)) +
    scale_y_reverse(breaks=seq(1,8), labels=LETTERS[1:8]) +
    scale_x_continuous(breaks=seq(1,12)) +
    labs(title="Plate Layout for My Experiment") +
    theme_bdc_microtiter()
```

For more information, see the [Plotting Microtiter Plate Maps](http://bconnelly.net/2014/05/plotting-microtiter-plate-maps/).

## theme_bdc_lattice_population

`theme_bdc_lattice_population` is a specialized theme intended to display
populations of individuals structured spatially in a lattice.

```{r theme_bdc_lattice_population}
popdata <- read.csv('sample_population_data.csv')
head(popdata)

ggplot(popdata, aes(x=Column, y=Row, color=Genotype)) +
        geom_point(shape=15) +
        coord_equal(ratio=1) +
        scale_color_hue(guide=FALSE) +
        theme_bdc_lattice_population()
```

## rescale_golden

`rescale_golden` adjusts the proportions of the axes of the given plot object
so that follow the golden ratio (horizontally). If no plot is provided, the last
plot that was displayed is used.

```{r rescale_golden}
ggplot(mtcars, aes(x=hp, y=mpg)) +
    geom_smooth() +
    geom_point(shape=1) +
    labs(x='Horsepower', y='Fuel Efficiency (mpg)') +
    theme_bdc_grey()
```

```{r rescale_golden2}
rescale_golden()
```


## rescale_square

`rescale_square` adjusts the proportions of the axes of the given plot object
so that they are equal. If no plot is provided, the last plot that was displayed
is used.

```{r rescale_square}
library(dplyr)

pg_movies <- filter(movies, mpaa=='PG')

ggplot(pg_movies, aes(x=budget/10^6, y=rating)) +
    geom_smooth() +
    geom_point(shape=1) +
    labs(x='Budget ($ Millions)', y='Rating', title='Does Budget Affect Movie Ratings?') +
    theme_bdc_grey()
```

```{r rescale_square2}
rescale_square()
```


## rescale_plot

`rescale_plot` adjusts the proportions of the axes of the given plot object to
the given ratio. If no plot is provided, the last plot that was displayed is
used.

```{r rescale_plot}
library(dplyr)

pg_movies <- filter(movies, mpaa=='PG')

ggplot(pg_movies, aes(x=budget/10^6, y=rating)) +
    geom_smooth() +
    geom_point(shape=1) +
    labs(x='Budget ($ Millions)', y='Rating', title='Does Budget Affect Movie Ratings?') +
    theme_bdc_grey()
rescale_plot(ratio=16/9)
```

## coord_golden

`coord_golden` sets the aspect ratio of the axes according to the golden ratio.
Whether the panel follows the golden ratio horizontally or vertically can be set
using the `orientation` argument. For an introduction to how aspect ratio
affects perception, see
[Aspect Ratio and Banking to 45 Degrees](http://eagereyes.org/basics/banking-45-degrees).

```{r coord_golden}
library(dplyr)

pg_movies <- filter(movies, mpaa=='PG')

ggplot(pg_movies, aes(x=year, y=budget/10^6, color=rating)) +
    geom_point() +
    labs(x='Year', y='Budget ($ Millions)', title='PG-13 Movie Budgets') +
    theme_bdc_grey() +
    coord_golden(xvals=pg_movies$year, yvals=pg_movies$budget/10^6,
                 orientation='horizontal')
```

## coord_square

`coord_square` sets the aspect ratio of the axes according to a square.

```{r coord_square}
library(dplyr)

pg_movies <- filter(movies, mpaa=='PG')

ggplot(pg_movies, aes(x=budget/10^6, y=rating)) +
    geom_smooth() +
    geom_point(shape=1) +
    labs(x='Budget ($ Millions)', y='Rating', title='Does Budget Affect Movie Ratings?') +
    theme_bdc_grey() +
    coord_square(xvals=pg_movies$budget/10^6, yvals=movies$rating)
```


## ggsave_golden

`ggsave_golden` saves the given plot to the given filename. If no plot is
specified, the most recently displayed plot is used. The proportions of the
plot's axes should first be set to the golden ratio using `rescale_golden` or
`coord_golden`.

```{r ggsave_golden}
ggplot(mtcars, aes(x=hp, y=mpg)) +
    geom_smooth() +
    geom_point(shape=1) +
    labs(x='Horsepower', y='Fuel Efficiency (mpg)') +
    theme_bdc_grey()
rescale_golden()
ggsave_golden('mpg against horsepower.pdf')
```
